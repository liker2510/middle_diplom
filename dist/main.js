(()=>{"use strict";const e=({formId:e,someElem:t=[]})=>{const o=document.getElementById(e),c=document.getElementById("calc"),r=document.createElement("div");r.classList.add("color");const s=()=>{let e=document.querySelectorAll(".color");null!==e&&e.forEach((e=>{e.style="color: #5cb85c; margin-top: 15px;"}))};function n(){r.textContent=""}s();try{if(!o)throw new Error("Верните форму на место, пожалуйста");o.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=o.querySelectorAll("input"),n=new FormData(o),a={};var l;r.textContent="Загрузка...",o.append(r),n.forEach(((e,t)=>{a[t]=e})),null!==c&&t.forEach((e=>{const t=document.getElementById(e.id);"number"===e.type&&0!==t.value&&""!==t.value&&(a[e.id]=t.value)})),(l=a,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((t=>{r.textContent="Спасибо! Мы с вами свяжемся!",s(),e.forEach((e=>{e.value=""}))})).catch((e=>{r.textContent="Ошибка...",s()}))})(),setTimeout(n,4e3)}))}catch(e){console.log(e.message)}};(()=>{const e=document.querySelectorAll('a[href^="#"]'),t=document.querySelector(".smooth-scroll");window.addEventListener("scroll",(function(){let e=window.pageYOffset,o=document.documentElement.clientHeight;e>o&&t.classList.add("smooth-scroll-active"),e<o&&t.classList.remove("smooth-scroll-active")}));for(let t of e)t.addEventListener("click",(function(e){e.preventDefault();const o=t.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}))})(),(()=>{const e=document.querySelector(".overlay"),t=document.querySelector(".header-modal--opened"),o=document.querySelector(".services-modal--opened");document.body.addEventListener("click",(c=>{c.target.matches(".button>a")&&(t.classList.remove("header-modal"),e.style="display: block"),c.target.matches(".service-button>a")&&(o.classList.remove("services-modal"),e.style="display: block"),c.target.classList.contains("services-modal__close")&&(o.classList.add("services-modal"),e.style=" "),c.target.classList.contains("header-modal__close")&&(t.classList.add("header-modal"),e.style=" ")}))})(),(()=>{function e(e){if(this.el=this.getElement(e.selector),!this.el)return console.log("Что-то не так с селектором");this.layout=e.layout||"+7 (___) ___-__-__",this.maskreg=this.getRegexp(),this.setListeners()}window.addEventListener("DOMContentLoaded",(function(t){const o=document.querySelectorAll("input[name=phone]");Array.prototype.forEach.call(o,(function(t){new e({selector:t,layout:t.dataset.mask})}))})),e.prototype.getRegexp=function(){var e=this.layout.replace(/_/g,"\\d");return(e=(e=(e=e.replace(/\(/g,"\\(")).replace(/\)/g,"\\)")).replace(/\+/g,"\\+")).replace(/\s/g,"\\s")},e.prototype.mask=function(e){var t=e.target,o=this.layout,c=0,r=o.replace(/\D/g,""),s=t.value.replace(/\D/g,"");r.length>=s.length&&(s=r),t.value=o.replace(/./g,(function(e){return/[_\d]/.test(e)&&c<s.length?s.charAt(c++):c>=s.length?"":e})),"blur"==e.type?new RegExp(this.maskreg).test(t.value)||(t.value=""):this.setCursorPosition(t.value.length,t)},e.prototype.setCursorPosition=function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var o=t.createTextRange();o.collapse(!0),o.moveEnd("character",e),o.moveStart("character",e),o.select()}},e.prototype.setListeners=function(){this.el.addEventListener("input",this.mask.bind(this),!1),this.el.addEventListener("focus",this.mask.bind(this),!1),this.el.addEventListener("blur",this.mask.bind(this),!1)},e.prototype.getElement=function(e){if(void 0===e)return!1;if(this.isElement(e))return e;if("string"==typeof e){var t=document.querySelector(e);if(this.isElement(t))return t}return!1},e.prototype.isElement=function(e){return e instanceof Element||e instanceof HTMLDocument},document.body.addEventListener("input",(e=>{"fio"===e.target.name&&(e.target.value=e.target.value.replace(/[^а-яА-Яa-zA-Z\s]+/,"")),"calc-input"===e.target.name&&(e.target.value=e.target.value.replace(/[^0-9]+/,""))}))})(),(()=>{const e=document.querySelectorAll(".sertificate-document"),t=document.getElementById("imgModal"),o=document.querySelector(".img_popup_close");e.forEach((e=>{e.classList.add("document-inner"),e.removeAttribute("href"),e.addEventListener("click",(()=>{t.style.display="block"}))})),o.addEventListener("click",(()=>{t.style.display="none"}))})(),(()=>{const e=document.querySelector("#calc"),t=document.querySelector("#calc-type"),o=document.querySelector("#calc-type-material"),c=document.querySelector("#calc-input"),r=document.querySelector("#calc-total");null!==e&&e.addEventListener("input",(e=>{e.target!==t&&e.target!==o&&e.target!==c||(()=>{const e=+t.options[t.selectedIndex].value,s=+o.options[o.selectedIndex].value;let n=+c.value,a=0;a=e&&s?e*s*n:0,(({timing:e,draw:t,duration:o})=>{let c=performance.now();requestAnimationFrame((function r(s){let n=(s-c)/o;n>1&&(n=1);let a=e(n);t(a),n<1&&requestAnimationFrame(r)}))})({duration:1e3,timing:e=>e,draw(e){r.value=Math.ceil(e*a)}})})()}))})(),(e=>{const t=document.querySelectorAll(".timer-days"),o=document.querySelectorAll(".timer-hours"),c=document.querySelectorAll(".timer-minutes"),r=document.querySelectorAll(".timer-seconds"),s=e=>e>=0&&e<10?"0"+e:e;let n=setInterval((()=>{(()=>{let a=(()=>{let t=(new Date(e).getTime()-(new Date).getTime())/1e3;return{timeRemaining:t,days:Math.floor(t/60/60/24),hours:Math.floor(t/60/60%24),minutes:Math.floor(t/60%60),seconds:Math.floor(t%60)}})();t.forEach((e=>{e.textContent=s(a.days)})),o.forEach((e=>{e.textContent=s(a.hours)})),c.forEach((e=>{e.textContent=s(a.minutes)})),r.forEach((e=>{e.textContent=s(a.seconds)})),a.timeRemaining<0&&(clearInterval(n),t.forEach((e=>{e.textContent="00"})),o.forEach((e=>{e.textContent="00"})),c.forEach((e=>{e.textContent="00"})),r.forEach((e=>{e.textContent="00"})))})()}),1e3)})("31 december 2021"),(()=>{const e=document.querySelector("#benefits"),t=document.querySelectorAll(".benefits__item"),o=document.querySelector("#services"),c=document.querySelectorAll(".service-block");let r=window.screen.width,s=0;const n=(e,t,o)=>{e[t].classList.remove(o)},a=(e,t,o)=>{e[t].classList.add(o)};r<=576?(t.forEach((e=>{e.classList.add("dnone"),e.style="max-width: 100%;",t[0].classList.add("service-block-active")})),e.addEventListener("click",(e=>{n(t,s,"service-block-active"),e.target.matches(".benefits__arrow--right>img")?s++:e.target.matches(".benefits__arrow--left>img")&&s--,s>=t.length&&(s=0),s<0&&(s=t.length-1),a(t,s,"service-block-active")}))):(t.forEach((e=>{e.classList.add("dnone"),e.style="max-width: 100%;",t[0].classList.add("service-block-active"),t[1].classList.add("service-block-active"),t[2].classList.add("service-block-active")})),e.addEventListener("click",(e=>{(e.target.matches(".benefits__arrow--right>img")||e.target.matches(".benefits__arrow--left>img"))&&t.forEach((e=>{e.classList.toggle("service-block-active")}))}))),r<1200?(c.forEach((e=>{e.classList.add("dnone"),c[0].classList.add("service-block-active")})),o.addEventListener("click",(e=>{n(c,s,"service-block-active"),e.target.matches(".services__arrow--right>img")?s++:e.target.matches(".services__arrow--left>img")&&s--,s>=c.length&&(s=0),s<0&&(s=c.length-1),a(c,s,"service-block-active")}))):(c.forEach((e=>{e.classList.add("dnone"),c[0].classList.add("service-block-active"),c[1].classList.add("service-block-active")})),o.addEventListener("click",(e=>{(e.target.matches(".services__arrow--right>img")||e.target.matches(".services__arrow--left>img"))&&c.forEach((e=>{e.classList.toggle("service-block-active")}))})))})(),e({formId:"form1",someElem:[{type:"number",id:"calc-total"}]}),e({formId:"form2",someElem:[{type:"number",id:"calc-total"}]})})();